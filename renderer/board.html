<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Odds Board</title>
<link rel="stylesheet" href="common.css" />
<link rel="stylesheet" href="board.css" />
</head>
<body>
  <div id="topbar" class="topbar">
    <div class="tbGroup" data-group="brokers">
      <button id="tbAddBroker" class="iconBtn" title="Add broker" aria-label="Add broker">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M11 5h2v14h-2zM5 11h14v2H5z"/></svg>
      </button>
      <select id="tbLayoutPreset" class="tbSelect" title="Layout preset" aria-label="Layout preset">
        <option value="">Layout</option>
        <optgroup label="Horizontal">
          <option value="2x2">2x2</option>
          <option value="2x3">2x3</option>
          <option value="3x3">3x3</option>
          <option value="1x2">1x2</option>
          <option value="1x2x2">1x2x2</option>
          <option value="2">2</option>
        </optgroup>
        <optgroup label="Vertical">
          <option value="1x1">1x1</option>
          <option value="1x1x1">1x1x1</option>
          <option value="1x1x2">1x1x2</option>
          <option value="2x2x2">2x2x2</option>
        </optgroup>
      </select>
    </div>

    <div class="tbGroup" data-group="refresh">
      <button id="tbRefreshAll" class="iconBtn" title="Refresh all brokers" aria-label="Refresh all brokers">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M17.65 6.35A7.95 7.95 0 0 0 12 4a8 8 0 1 0 7.75 6h-2.1A6 6 0 1 1 12 6c1.66 0 3.14.69 4.22 1.78L14 10h6V4l-2.35 2.35z"/></svg>
      </button>
      <label class="tbCheck" title="Auto refresh" aria-label="Auto refresh">
        <input type="checkbox" id="tbAutoReload" />
        <span class="tbCheckMark" aria-hidden="true"></span>
      </label>
    </div>

    <div class="tbGroup" data-group="ui">
      <button id="tbBoardSide" class="iconBtn" title="Move board left/right" aria-label="Move board left/right" data-side="right">
        <svg class="arrow" viewBox="0 0 24 24" aria-hidden="true"><path d="M10 6l6 6-6 6-1.4-1.4L13.2 12 8.6 7.4 10 6z"/></svg>
      </button>
      <button id="tbStats" class="iconBtn" title="Stats" aria-label="Stats">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M5 9h3v10H5V9zm5-4h3v14h-3V5zm5 7h3v7h-3v-7z"/></svg>
      </button>
      <button id="tbSettings" class="iconBtn" title="Settings" aria-label="Settings">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M19.14 12.94c.04-.31.06-.63.06-.94s-.02-.63-.06-.94l2.03-1.58a.5.5 0 0 0 .12-.64l-1.92-3.32a.5.5 0 0 0-.6-.22l-2.39.96a7.1 7.1 0 0 0-1.63-.94l-.36-2.54A.5.5 0 0 0 12.9 1h-3.8a.5.5 0 0 0-.49.42l-.36 2.54c-.58.23-1.12.54-1.63.94l-2.39-.96a.5.5 0 0 0-.6.22L1.71 7.48a.5.5 0 0 0 .12.64l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58a.5.5 0 0 0-.12.64l1.92 3.32c.13.23.39.32.6.22l2.39-.96c.5.4 1.05.71 1.63.94l.36 2.54c.04.24.25.42.49.42h3.8c.24 0 .45-.18.49-.42l.36-2.54c.58-.23 1.12-.54 1.63-.94l2.39.96c.21.1.47.01.6-.22l1.92-3.32a.5.5 0 0 0-.12-.64l-2.03-1.58zM11 15.5A3.5 3.5 0 1 1 14.5 12 3.5 3.5 0 0 1 11 15.5z"/></svg>
      </button>
    </div>
  </div>

  <div id="header">
  <span class="boardTitle">Aggregated Odds</span>
  <label class="mapLabel">Map
      <select id="mapSelect">
        <option value="0">Match</option>
        <option value="1" selected>1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
      </select>
    </label>
    <button id="mapRefreshBtn" title="Re-broadcast current map (refresh odds)" style="margin-left:6px;padding:2px 6px;font:12px system-ui;line-height:1;cursor:pointer;">⟳</button>
    <label class="lastLabel" title="Use match market for final map brokers (bet365)"><input type="checkbox" id="isLastChk" /> Last</label>
    <span id="tolBadge" class="tag" title="Auto tolerance (from Settings)">Tol: —</span>
  </div>
  <div id="tableContainer">
  <table id="table">
    <thead>
      <tr>
        <th class="c-broker">Broker</th>
        <th id="side1Header" class="c-odds">Side 1</th>
        <th id="side2Header" class="c-odds">Side 2</th>
      </tr>
    </thead>
    <tbody id="rows"></tbody>
    <tfoot>
      <tr id="midRow"><th>Mid</th><td colspan="2">-</td></tr>
  <tr id="excelRow"><th><div class="excelControls">Excel <button id="autoBtn" class="autoBtn" title="Toggle auto alignment of smallest odds">Auto</button><button id="autoResumeBtn" class="autoSubBtn" title="Auto-resume after suspend (on/off)">R</button><button id="excelScriptBtn" class="autoSubBtn">S</button></div></th><td colspan="2"><span id="excelOddsVal">-</span><span id="excelStatusCell" class="font-10 muted" style="display:none;margin-left:6px;">idle</span></td></tr>
      <tr id="excelAutoRow" style="display:none"><th></th><td colspan="2" class="excelAutoCell"><div class="autoIndicators">
        <span class="autoDot side1" title="Adjusting side 1"></span>
        <span class="autoDot side2" title="Adjusting side 2"></span>
        <span id="autoStatusText" class="autoStatus"></span>
      </div></td></tr>
      <tr id="arbRow"><th>Arb</th><td colspan="2">-</td></tr>
    </tfoot>
  </table>
  </div>
  <script src="devcss-reload.js"></script>
  <!-- Shared odds core for aggregation and derived calculations -->
   <script src="core/odds_core.js"></script>
  <script src="core/auto_hub.js"></script>
   <script src="core/auto_core.js"></script>
  <!-- Auto trader logic split from board.js for easier maintenance -->
  <script src="auto_trader.js"></script>
  <script src="board.js"></script>
</body>
</html>
