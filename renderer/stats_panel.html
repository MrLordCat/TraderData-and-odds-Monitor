<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Stats Panel</title>
  <link rel="stylesheet" href="common.css" />
  <link rel="stylesheet" href="stats.css" />
  <link rel="stylesheet" href="lolstats.css" />
  <link rel="stylesheet" href="stats_activity.css" />
  <link rel="stylesheet" href="map.css" />
  <link rel="stylesheet" href="stats_panel_inline.css" />
</head>
<body>
  <header>
    <div class="groupRow">
  <div id="sourcesSection" class="sectionCard collapsible" data-sec="sourcesLayout">
      <div class="sectionHeader" style="margin-bottom:8px;">
        <button class="dragHandleSec" title="Drag to reorder" tabindex="-1">≡</button>
        <span class="accent">Sources & Layout</span>
        <button id="sourcesCollapse" class="collapseBtn" title="Collapse/Expand" aria-expanded="true">▾</button>
      </div>
      <div class="sectionBody" id="sourcesBody" style="gap:8px;">
          <div class="sourcesGrid">
            <label for="srcA">A</label><select id="srcA">
              <option value="https://portal.grid.gg">portal.grid.gg</option>
              <option value="https://www.twitch.tv">twitch.tv</option>
              <option value="https://www.youtube.com">youtube.com</option>
              <option value="embed:lolstats">LoL Stats (embed)</option>
            </select>
            <label for="srcB">B</label><select id="srcB">
              <option value="https://portal.grid.gg">portal.grid.gg</option>
              <option value="https://www.twitch.tv">twitch.tv</option>
              <option value="https://www.youtube.com">youtube.com</option>
              <option value="embed:lolstats">LoL Stats (embed)</option>
            </select>
          </div>
          <div class="divider"></div>
          <div class="row"><input class="grow" id="customA" placeholder="Custom A URL"><button id="applyA">Set A</button></div>
          <div class="row"><input class="grow" id="customB" placeholder="Custom B URL"><button id="applyB">Set B</button></div>
          <div class="divider"></div>
          <div class="modeButtons"><button id="modeSplit" title="Horizontal split">Split</button><button id="modeVertical" title="Vertical split">Vert</button><button id="modeA" title="A full height">A</button><button id="modeB" title="B full height">B</button></div>
          <button id="toggleSide" class="panelSideBtn" title="Toggle panel side">Panel Side</button>
          <div class="divider"></div>
          <!-- Removed: FrameGen / upscaler controls -->
          <div class="note">Layout: <span id="dbgLayout"></span><br/>Side: <span id="dbgSide"></span></div>
      </div>
    </div>
      <fieldset id="devtoolsSection" class="statBlock" data-sec="devtools" style="margin-top:8px;">
        <legend><span class="accent">Dev Tools</span></legend>
        <div class="secBody" style="max-height:none;overflow:visible;">
          <div class="row" style="gap:6px;flex-wrap:wrap;">
            <button id="btnOpenPanelDevTools" class="btn-sm font-11" title="Open DevTools for Stats Panel">Panel</button>
            <button id="btnOpenSlotADevTools" class="btn-sm font-11" title="Open DevTools for Slot A">Slot A</button>
            <button id="btnOpenSlotBDevTools" class="btn-sm font-11" title="Open DevTools for Slot B">Slot B</button>
          </div>
          <div class="note font-10" style="margin-top:6px;opacity:0.7;">For debugging only. Hidden in production builds if needed.</div>
        </div>
      </fieldset>
    </div>
  </header>
  <div id="stats" class="collapsible sectionCard">
  <div class="sectionHeader">
    <button class="dragHandleSec" title="Drag to reorder" tabindex="-1">≡</button>
    <span class="accent">Game Stats</span>
    <button id="statsCollapse" class="collapseBtn" title="Collapse/Expand" aria-expanded="true">▾</button>
    <select id="lolGameSelect" class="font-11" style="padding:2px 6px;min-width:78px;vertical-align:middle;"><option value="" disabled selected>Game -</option></select>
    <button id="lolAddGameBtn" class="btn-sm font-11 addGameBtn" title="Add manual game" aria-disabled="true">+ Game</button>
  </div>
  <div class="statsBody sectionBody"><div class="statsControls">
  <button id="lolReset" class="btn-sm font-11">Reset LoL Stats</button>
  <label class="authRow font-11" style="cursor:pointer;">
        <input id="lolManualMode" type="checkbox" style="margin:0;"> Manual
      </label>
  <button id="swapTeamsBtn" class="btn-sm font-11">Swap Teams</button>
  <button id="captureSlotBBtn" class="btn-sm font-11" title="Capture scoreboard from Slot B (prototype)">Capture Data</button>
  <span class="lolStatusWrap"><span id="lolStatus" class="statusSmall">Waiting...</span></span>
      <!-- Metrics toggles removed for full visual reset -->
    </div>
  <div class="lolTableWrap">
  <table id="lolTable" class="tblCompact tblHeadSticky">
        <thead>
          <tr>
            <th class="thLeft">Metric</th>
            <th id="lt-team1" class="thCell"><span class="teamNameWrap" data-team="1">Team 1</span></th>
            <th id="lt-team2" class="thCell"><span class="teamNameWrap" data-team="2">Team 2</span></th>
          </tr>
        </thead>
        <tbody id="lt-body"></tbody>
      </table>
  </div></div>
    <!-- Map Section -->
  <div id="mapSection" class="mapSection sectionCard collapsible">
      <div class="sectionHeader" style="margin-bottom:6px;">
        <button class="dragHandleSec" title="Drag to reorder" tabindex="-1">≡</button>
        <span class="accent">Map View</span>
        <button id="mapCollapse" aria-expanded="false" class="collapseBtn">▸</button>
        <span id="mapGameLabel" class="statusSmall">Game -</span>
      </div>
  <div id="mapBody" class="mapBody sectionBody">
    <div id="map-view" tabindex="0"></div>
  <div id="mapLegendHint" class="mapLegendHint">Click = destroyed toggle, Drag = move marker. Stored per game locally.</div>
      </div>
    </div>
  </div>
    <!-- Embedded Odds Board Section (collapsed by default) -->
  <div id="embeddedOddsSection" class="embeddedOddsSection sectionCard collapsible collapsed" data-sec="embeddedOdds" style="margin-top:16px;">
      <div class="sectionHeader" style="margin-bottom:6px;">
        <button class="dragHandleSec" title="Drag to reorder" tabindex="-1">≡</button>
  <span class="accent">Odds Board</span>
        <span id="embeddedMapTag" class="statusSmall" style="margin-left:8px;display:none;">Map -</span>
        <label id="embeddedIsLastWrap" class="mapLabel" style="margin-left:8px;display:inline-flex;align-items:center;gap:4px;" title="Use match market for final map brokers (bet365)">
          <input type="checkbox" id="embeddedIsLast" style="margin:0 4px 0 0;vertical-align:middle;" />
          <span class="font-11 muted" style="opacity:.7;">Last</span>
        </label>
        <label class="mapLabel" style="margin-left:4px;display:inline-flex;align-items:center;gap:4px;">
          <span class="font-11 muted" style="opacity:.7;">Set</span>
          <select id="embeddedMapSelect" class="font-11" style="padding:2px 4px;">
            <option value="0">Match</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
          </select>
        </label>
        <button id="embeddedMapRefreshBtn" class="btn-sm font-11" title="Re-broadcast current map (refresh odds)" style="margin-left:4px;padding:2px 6px;line-height:1;cursor:pointer;">⟳</button>
  <button id="embeddedOddsCollapse" aria-expanded="false" class="collapseBtn" title="Expand / Collapse">▸</button>
      </div>
  <div id="embeddedOddsBody" class="embeddedOddsBody sectionBody">
        <table id="embeddedOddsTable" class="embeddedOddsTable tblCompact">
          <thead>
            <tr>
              <th class="eo-broker">Broker</th>
              <th class="eo-side1" id="eo-side1">Side 1</th>
              <th class="eo-swap eo-swap-header" title="Swap sides column"></th>
              <th class="eo-side2" id="eo-side2">Side 2</th>
            </tr>
          </thead>
          <tbody id="embeddedOddsRows"></tbody>
          <tfoot>
            <tr id="embeddedMidRow"><th>Mid</th><td colspan="3" id="embeddedMidCell">-</td></tr>
            <tr id="embeddedExcelRow"><th>Excel <button id="embeddedAutoBtn" class="autoBtn" title="Auto align smallest Excel odd to Mid smallest">Auto</button><button id="embeddedAutoResumeBtn" class="autoSubBtn" title="Embedded auto-resume after suspend (on/off)">R</button></th><td colspan="3" id="embeddedExcelCell">-</td></tr>
            <tr id="embeddedExcelAutoIndicatorsRow" style="display:none"><th></th><td colspan="3" class="excelAutoCell excelAutoIndicatorsCell"><div class="autoIndicators">
              <span class="autoDot side1" title="Adjusting side 1"></span>
              <span class="autoDot side2" title="Adjusting side 2"></span>
            </div></td></tr>
          </tfoot>
        </table>
      </div>
    </div>
  <script src="devcss-reload.js"></script>
  <script src="stats_config.js"></script>
  <script src="stats_config.js"></script>
  <script src="stats_theme.js"></script>
  <script src="stats_collapse.js"></script>
  <script src="stats_embedded.js"></script>
  <script src="stats_map.js"></script>
  <script src="stats_panel.js"></script>
  <script src="stats_boot.js"></script>
  <script>
    (function(){
      function bind(id, payload){ const el=document.getElementById(id); if(!el) return; el.addEventListener('click', ()=>{ try { if(window.require){ const { ipcRenderer } = require('electron'); ipcRenderer.send('stats-open-devtools', payload); } } catch(e){ console.warn('[devtools] send failed', e); } }); }
      bind('btnOpenPanelDevTools', { target:'panel' });
      bind('btnOpenSlotADevTools', { slot:'A' });
      bind('btnOpenSlotBDevTools', { slot:'B' });
    })();
  </script>
</body>
</html>