/* ==========================================
	 League Stats Panel Styles (stats.css)
	 Material 3 Design System Integration
	 ========================================== */

@import url("./m3-components.css");
@import url("./ui/odds_board_shared.css");

/* Theme Tokens - now inherit from m3-tokens.css */
:root {
	/* Legacy aliases for backward compatibility */
	--bg: var(--md-sys-color-surface);
	--panel: var(--md-sys-color-surface-container);
	--panel-alt: var(--md-sys-color-surface-container-high);
	--accent: var(--md-sys-color-primary);
	--accent-glow: var(--md-sys-color-primary);
	--good: var(--md-sys-color-success);
	--good-glow: var(--md-sys-color-success);
	--text: var(--md-sys-color-on-surface);
	--muted: var(--md-sys-color-on-surface-variant);
	--danger: var(--md-sys-color-error);
	--radius: var(--md-sys-shape-corner-medium);
	--transition: var(--md-sys-motion-duration-short2);
}

/* Base Layout */
body {
	margin: 0;
	font: var(--md-sys-typescale-body-medium-size)/var(--md-sys-typescale-body-medium-line-height) var(--md-sys-typescale-font-family);
	background: var(--md-sys-color-surface);
	color: var(--md-sys-color-on-surface);
	-webkit-font-smoothing: antialiased;
	scrollbar-gutter: stable both-edges;
}

/* Unified: collapse via title click (no separate button) */
.collapsible[data-collapse-on-header="1"] .sectionHeader .accent{
	position: relative;
	padding-right: 14px;
	cursor: pointer;
	user-select: none;
}
.collapsible[data-collapse-on-header="1"] .sectionHeader .accent::after{
	content: '▾';
	position: absolute;
	right: 0;
	top: 50%;
	transform: translateY(-50%);
	font-size: 11px;
	opacity: .85;
}
.collapsible.collapsed[data-collapse-on-header="1"] .sectionHeader .accent::after{
	content: '▸';
}
.embeddedOddsHeader { 
	display:flex;
	align-items:center;
	gap: var(--md-sys-spacing-sm);
	font-size: var(--md-sys-typescale-title-small-size);
	margin:0;
	padding: var(--md-sys-spacing-xs) var(--md-sys-spacing-sm);
	background: linear-gradient(
		180deg,
		var(--md-sys-color-surface-container-high) 0%,
		var(--md-sys-color-surface-container) 100%
	);
	border-bottom:1px solid var(--md-sys-color-outline-variant);
}
.embeddedOddsHeader .accent { font-weight: var(--md-sys-typescale-title-small-weight); }
.dragHandleSec { 
	cursor:grab;
	background:transparent;
	border:none;
	color: var(--md-sys-color-on-surface-variant);
	font-size:14px;
	line-height:1;
	padding:0 4px;
	opacity: 0.6;
	transition: opacity var(--md-sys-motion-duration-short1);
}
.dragHandleSec:hover { opacity: 1; }
.dragHandleSec:active { cursor:grabbing; }
.reorderGhost { opacity:.4 !important; }
/* New thin line indicator replacing bulky gap placeholder */
.dropLine { height:6px; margin:4px 0; border-radius:3px; background:linear-gradient(90deg,#2f7cf6,#3aa9ff); box-shadow:0 0 0 1px #2f7cf6aa,0 0 8px #2f7cf666; pointer-events:none; }
/* Highlight the actively dragged block */
.reorderDragging { position:relative; z-index:10; box-shadow:0 0 0 2px #2f7cf6, 0 0 10px #2f7cf688; border-radius:0; }

/* Generic reorder wrappers (applied dynamically) */
.reorderableSection { position:relative; }

header {
	/* M3 Surface Container */
	padding: 0;
	display: flex;
	flex-direction: column;
	gap: 0;
	background: var(--md-sys-color-surface-container);
	border-bottom: none;
	box-shadow: var(--md-sys-elevation-level2);
}

/* ================= Unified Section System - M3 Cards with depth ================= */
.sectionGroup { display:flex; flex-direction:column; gap:0; }

.sectionCard { 
	position:relative; 
	border: 1px solid var(--md-sys-color-outline-variant);
	background: linear-gradient(
		180deg,
		var(--md-sys-color-surface-container) 0%,
		var(--md-sys-color-surface-container-low) 100%
	);
	border-radius: var(--md-sys-shape-corner-medium);
	padding: var(--md-sys-spacing-sm) var(--md-sys-spacing-md);
	margin: var(--md-sys-spacing-xs) var(--md-sys-spacing-sm);
	box-shadow: var(--md-sys-elevation-1);
	transition: box-shadow var(--md-sys-motion-duration-short2) var(--md-sys-motion-easing-standard),
	            border-color var(--md-sys-motion-duration-short2) var(--md-sys-motion-easing-standard);
}

.sectionCard:hover {
	box-shadow: var(--md-sys-elevation-2);
	border-color: var(--md-sys-color-outline);
}

.sectionCard + .sectionCard { margin-top: var(--md-sys-spacing-xs); }
#embeddedOddsSection + .sectionCard { margin-top: var(--md-sys-spacing-xs); }

.sectionHeader { 
	display:flex; 
	align-items:center; 
	gap: var(--md-sys-spacing-sm);
	margin:0 0 var(--md-sys-spacing-sm);
	font: var(--md-sys-typescale-title-small-weight) var(--md-sys-typescale-title-small-size)/var(--md-sys-typescale-title-small-line-height) var(--md-sys-typescale-font-family);
	letter-spacing: var(--md-sys-typescale-title-small-tracking);
	color: var(--md-sys-color-on-surface);
}

.sectionHeader .accent { color: var(--md-sys-color-primary); }
.sectionHeader .right { margin-left:auto; display:flex; gap:6px; align-items:center; }
.sectionBody { display:flex; flex-direction:column; gap: var(--md-sys-spacing-md); }
.sectionCondensed { padding: var(--md-sys-spacing-sm) var(--md-sys-spacing-md); }

.inlineBadges { display:flex; gap:6px; }
.badge { 
	background: var(--md-sys-color-secondary-container);
	color: var(--md-sys-color-on-secondary-container);
	font-size: var(--md-sys-typescale-label-small-size);
	padding: var(--md-sys-spacing-xs) var(--md-sys-spacing-sm);
	border-radius: var(--md-sys-shape-corner-full);
	line-height:1;
	text-transform:uppercase;
	letter-spacing: var(--md-sys-typescale-label-small-tracking);
}

/* Light divider line reused */
.rule { height:1px; background: var(--md-sys-color-outline-variant); margin:4px 0 8px; }

/* Collapse affordance standard - M3 Icon Button style */
.collapseBtn { 
	background: transparent;
	border: none;
	color: var(--md-sys-color-on-surface-variant);
	width: 40px;
	height: 40px;
	display:inline-flex;
	align-items:center;
	justify-content:center;
	border-radius: var(--md-sys-shape-corner-full);
	font-size:11px;
	cursor:pointer;
	position: relative;
	transition: background var(--md-sys-motion-duration-short2) var(--md-sys-motion-easing-standard);
}
.collapseBtn::before {
	content: '';
	position: absolute;
	inset: 0;
	border-radius: inherit;
	background: var(--md-sys-color-on-surface);
	opacity: 0;
	transition: opacity var(--md-sys-motion-duration-short1) var(--md-sys-motion-easing-standard);
}
.collapseBtn:hover::before { opacity: 0.08; }
.collapseBtn:active::before { opacity: 0.12; }

/* Harmonize existing fieldsets with M3 look */
fieldset.statBlock { 
	border-radius: var(--md-sys-shape-corner-medium);
	background: var(--md-sys-color-surface-container);
	border: none;
	box-shadow: var(--md-sys-elevation-level1);
}
fieldset.statBlock legend { display:flex; align-items:center; gap:8px; font:600 13px var(--font-sans); letter-spacing:.3px; color:#d5deea; padding:0 2px; text-transform:none; }
fieldset.statBlock legend .accent { color:var(--accent); }
fieldset.statBlock[data-sec="devtools"] .dragHandleSec { display:none !important; }
#sourcesSection { margin-bottom:0; }

/* Flat: keep Map/Odds blocks flush like Game Stats */
/* Use the same padding/margins as other section cards to avoid ultra-thin collapsed rows */

/* DevTools buttons uniform */
#btnOpenPanelDevTools,#btnOpenSlotADevTools,#btnOpenSlotBDevTools { min-width:58px; }

fieldset {
	margin: 0;
	border: 1px solid #2c3649;
	padding: 10px 12px;
	border-radius: 0;
	background: var(--panel-alt);
	display: flex;
	flex-direction: column;
	gap: 8px;
	min-width: 0;
}

legend {
	padding: 0 6px;
	font-size: 11px;
	text-transform: uppercase;
	letter-spacing: .8px;
	color: var(--muted);
}

/* Collapsible Sections */
fieldset.collapser legend {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 6px;
}

.secToggle {
	background: #1c2533;
	border: 1px solid #2c3649;
	color: #89a2c4;
	font-size: 11px;
	padding: 2px 6px;
	border-radius: 6px;
	cursor: pointer;
	line-height: 1;
	min-width: 28px;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	transition: background var(--transition), border-color var(--transition), transform var(--transition);
}

.secToggle:hover {
	background: #253242;
	color: #cfe2ff;
}

.secToggle:active {
	transform: translateY(1px);
}

fieldset.collapser .secBody {
	overflow: hidden;
	transition: max-height 300ms cubic-bezier(.4, .12, .25, 1), opacity 240ms ease;
	max-height: 600px;
	opacity: 1;
}

fieldset.collapser.collapsed .secBody {
	max-height: 0 !important;
	opacity: 0;
}

fieldset.collapser {
	transition: background 160ms ease, border-color 160ms ease;
}

fieldset.collapser.collapsed {
	background: linear-gradient(180deg, #182130, #151b27);
}

/* Form Elements - inherited from m3-components.css, only overrides here */
button {
	cursor: pointer;
	font-weight: var(--md-sys-typescale-label-large-weight);
	letter-spacing: var(--md-sys-typescale-label-large-tracking);
	position: relative;
	overflow: hidden;
}

/* M3 State Layer */
button::before {
	content: '';
	position: absolute;
	inset: 0;
	background: var(--md-sys-color-on-surface);
	opacity: 0;
	transition: opacity var(--md-sys-motion-duration-short1) var(--md-sys-motion-easing-standard);
}

button:hover::before { opacity: 0.06; }
button:active::before { opacity: 0.10; }

button:hover {
	background: var(--md-sys-color-surface-container-highest);
	border-color: var(--md-sys-color-outline);
}

button:active {
	transform: none;
}

/* Focus styles inherited from m3-components.css */

/* Utility Layout */
.row {
	display: flex;
	align-items: center;
	gap: 6px;
	flex-wrap: nowrap;
}

.grow {
	flex: 1;
}

/* Stats Container - M3 Surface */
#stats {
	flex:1;
	overflow:auto;
	padding: var(--md-sys-spacing-md) var(--md-sys-spacing-lg);
	font: var(--md-sys-typescale-body-small-size)/1.45 var(--md-sys-typescale-font-family);
	background: var(--md-sys-color-surface-container-low);
	border: none;
	border-radius: var(--md-sys-shape-corner-medium);
	display:flex;
	flex-direction:column;
	box-sizing:border-box;
	box-shadow: var(--md-sys-elevation-level1);
	margin: var(--md-sys-spacing-xs) var(--md-sys-spacing-sm);
}

/* Generic collapsible card (stats, sources) */
.collapsible .sectionBody { overflow:hidden; transition:max-height 300ms cubic-bezier(.4,.12,.25,1), opacity 240ms ease; max-height:1000px; }
.collapsible.collapsed .sectionBody { max-height:0 !important; opacity:0; }

/* Slight inner padding to offset potential scrollbar overlay (fallback) */
body { padding-right:2px; }

/* Embedded Odds Excel control alignment moved to ui/odds_board_shared.css */

h1.statsHeader {
	display: flex;
	align-items: center;
	gap: 8px;
}

/* Normalize header look (Game Stats / Odds) */
h1.statsHeader, .embeddedOddsHeader {
	font-size:13px;
	font-weight:600;
}
h1.statsHeader { text-shadow:none; }

/* Compact small button baseline - M3 tonal button small */
.btn-sm { 
	padding: var(--md-sys-spacing-xs) var(--md-sys-spacing-md);
	font-size: var(--md-sys-typescale-label-medium-size);
	line-height: 1.15;
	background: var(--md-sys-color-secondary-container);
	color: var(--md-sys-color-on-secondary-container);
	border: none;
	border-radius: var(--md-sys-shape-corner-full);
}

/* Controls strip visual container - M3 Surface */
.statsControls {
	background: var(--md-sys-color-surface-container-high);
	border: none;
	padding: var(--md-sys-spacing-sm) var(--md-sys-spacing-md);
	border-radius: var(--md-sys-shape-corner-medium);
	gap: var(--md-sys-spacing-md);
	box-shadow: inset 0 1px 2px rgba(0,0,0,.15);
}

/* Tighten Game Stats header spacing */
h1.statsHeader { margin:0 0 10px; }

/* Odds section spacing */
#embeddedOddsSection { margin-top:0; }

/* Collapse arrow buttons unified */
.btn-icon-xs { background:#1c2533; border:1px solid #2c3649; border-radius:6px; }
.btn-icon-xs:hover { background:#253242; }
.btn-icon-xs:active { transform:translateY(1px); }

/* Details summary styling */
details > summary.metricSummary { list-style:none; }
details > summary.metricSummary::-webkit-details-marker { display:none; }
details[open] > summary.metricSummary { color:var(--accent); }

/* Add Game button stabilization */
.addGameBtn {
	min-width: 70px;
	text-align: center;
	padding: 4px 10px;
	line-height: 1.1;
}
.addGameBtn[aria-disabled="true"] {
	opacity: .35;
	cursor: default;
}

h1 {
	margin: 0 0 8px;
	font-size: 15px;
	font-weight: 600;
	color: var(--accent);
	text-shadow: 0 0 4px rgba(63, 134, 255, .35);
}

small {
	opacity: .6;
	font-size: 11px;
	display: block;
	margin-top: 10px;
}

/* Grouped Blocks */
.groupRow {
	display: flex;
	gap: 10px;
	flex-wrap: wrap;
}

.groupRow .statBlock {
	width: 300px;
	min-width: 300px;
	flex: 0 0 300px;
}

@media (max-width: 980px) {
	.groupRow .statBlock {
		width: 100%;
		min-width: 0;
		flex: 1 1 100%;
	}
}

/* Mode Buttons */
.modeButtons button {
	flex: 1;
}

/* Visually indicate disabled state for layout buttons */
.modeButtons button:disabled {
	opacity: .35;
	cursor: default;
	filter: grayscale(.3);
}
.modeButtons button:disabled:hover {
	opacity: .35;
}

.modeButtons {
	display: flex;
	gap: 6px;
}

.panelSideBtn {
	width: 100%;
}
.panelSideBtn:disabled {
	opacity: .35;
	cursor: default;
	filter: grayscale(.3);
}

/* Sources Grid */
.sourcesGrid {
	display: grid;
	grid-template-columns: 28px 1fr;
	align-items: center;
	gap: 6px;
}

.sourcesGrid label {
	font-size: 11px;
	color: var(--muted);
	text-align: right;
}

.sourcesGrid select:disabled {
	opacity: .45;
	filter: grayscale(.25);
	cursor: default;
}

.divider {
	height: 1px;
	background: var(--md-sys-color-outline-variant);
	margin: var(--md-sys-spacing-xs) 0;
}

.note {
	font-size: var(--md-sys-typescale-body-small-size);
	color: var(--md-sys-color-on-surface-variant);
}

/* Extracted Inline Styles (Legacy) */
.authSecBody {
	display: flex;
	flex-direction: column;
	gap: 4px;
}

.authRow {
	display: flex;
	gap: 4px;
	align-items: center;
}

.font-11 { font-size: 11px; }
.pad-sq-xs { padding: 2px 4px; }
.pad-sq-sm { padding: 3px 6px; }
.pad-btn-xs { padding: 4px 8px; }
.note-tight { font-size: 10px; line-height: 1.2; }
.break-all { word-break: break-all; }
.op-70 { opacity: .7; }

/* Stats Controls */
/* (Merged definition above; keep layout behavior separated for clarity) */
.statsControls { display:flex; align-items:center; flex-wrap:wrap; margin-bottom:8px; }

/* == RESET: LoL Stats Table styles removed intentionally for redesign == */
#lolTable {
  width:100%;
  border-collapse:collapse;
  font:11px var(--font-sans, system-ui, sans-serif);
}
#lolTable th, #lolTable td { padding:4px 6px; border:1px solid #283240; }
#lolTable thead th { background:#15202b; font-weight:600; text-align:left; }
/* Minimal placeholder widths (will be replaced in new design) */

/* Win/Lose highlight (restored) */
#lolTable td.wl-win { color: var(--good); font-weight: 600; text-shadow: 0 0 6px rgba(52,255,141,.12); }
#lolTable td.wl-lose { color: #8b95a6; opacity: .9; }
/* Header team name highlight */
#lolTable th.wl-win .teamNameWrap { color: var(--good); text-shadow: 0 0 8px rgba(52,255,141,.18); }
#lolTable th.wl-lose .teamNameWrap { color: #9aa7bd; opacity: .95; }
#lolTable th:nth-child(1), #lolTable td:nth-child(1){ width:40%; }
#lolTable th:nth-child(2), #lolTable td:nth-child(2){ width:30%; }
#lolTable th:nth-child(3), #lolTable td:nth-child(3){ width:30%; }
/* End reset block */

.btn-icon-xs { padding: 2px 8px; font-size: 11px; }
.statusSmall { font-size: 11px; opacity: .65; }
.metricSummary { cursor: pointer; font-size: 11px; opacity: .8; }

/* Removed: metric rows, drag handles, editable states, toggle animations, reorder effects */
/* Keep status width container for now */
.lolStatusWrap { display:inline-block; min-width:120px; white-space:nowrap; padding-left:6px; }

/* ================= Odds Board Header Controls - M3 ================= */
.oddsHeaderControls {
	display: flex;
	align-items: center;
	gap: var(--md-sys-spacing-sm);
	margin-left: auto;
	font-size: var(--md-sys-typescale-label-medium-size);
}

.oddsHeaderControls .mapLabel {
	display: inline-flex;
	align-items: center;
	gap: var(--md-sys-spacing-xs);
	color: var(--md-sys-color-on-surface-variant);
}

/* Unified button height for all controls - M3 chips style */
.oddsToolBtn, .oddsToggleBtn, .oddsToolSelect {
	height: 32px;
	padding: 0 var(--md-sys-spacing-md);
	font-size: var(--md-sys-typescale-label-medium-size);
	background: var(--md-sys-color-surface-container-highest);
	border: 1px solid var(--md-sys-color-outline);
	border-radius: var(--md-sys-shape-corner-small);
	color: var(--md-sys-color-on-surface);
	cursor: pointer;
	transition: all var(--md-sys-motion-duration-short2) var(--md-sys-motion-easing-standard);
	white-space: nowrap;
	box-sizing: border-box;
	position: relative;
}

.oddsToolBtn::before, .oddsToggleBtn::before {
	content: '';
	position: absolute;
	inset: 0;
	border-radius: inherit;
	background: var(--md-sys-color-on-surface);
	opacity: 0;
	transition: opacity var(--md-sys-motion-duration-short1) var(--md-sys-motion-easing-standard);
}

.oddsToolBtn:hover::before, .oddsToggleBtn:hover::before {
	opacity: 0.08;
}

.oddsToolBtn:hover, .oddsToggleBtn:hover {
	border-color: var(--md-sys-color-outline);
}

/* Toggle button active state - M3 filled style */
.oddsToggleBtn.active {
	background: var(--md-sys-color-primary);
	border-color: var(--md-sys-color-primary);
	color: var(--md-sys-color-on-primary);
}
.oddsToggleBtn.active::before {
	background: var(--md-sys-color-on-primary);
}

.oddsTolBadge {
	height: 32px;
	line-height: 30px;
	padding: 0 var(--md-sys-spacing-md);
	font-size: var(--md-sys-typescale-label-small-size);
	background: var(--md-sys-color-surface-container);
	border-radius: var(--md-sys-shape-corner-full);
	color: var(--md-sys-color-on-surface-variant);
	box-sizing: border-box;
}

/* ================= Unified Panel Toolbar - M3 ================= */
.embeddedOddsToolbar {
	display: flex;
	align-items: center;
	gap: var(--md-sys-spacing-md);
	padding: var(--md-sys-spacing-sm) 0;
	border-bottom: 1px solid var(--md-sys-color-outline-variant);
	margin-bottom: var(--md-sys-spacing-sm);
}

.embeddedOddsToolbar .toolbarGroup {
	display: flex;
	align-items: center;
	gap: var(--md-sys-spacing-sm);
}

/* Arb row styling - only show when arbitrage exists */
#embeddedArbRow th { color: var(--md-sys-color-on-surface-variant); }
#embeddedArbCell { font-weight: var(--md-sys-typescale-label-large-weight); }
#embeddedArbCell.arb-positive { color: var(--md-sys-color-success); }

/* Broker picker dropdown - M3 Menu style */
.brokerPicker {
	position: fixed;
	z-index: 1000;
	background: var(--md-sys-color-surface-container);
	border: none;
	border-radius: var(--md-sys-shape-corner-medium);
	box-shadow: var(--md-sys-elevation-level3);
	min-width: 180px;
	max-width: 280px;
	padding: var(--md-sys-spacing-sm) 0;
	transform-origin: top;
	animation: md-menu-open var(--md-sys-motion-duration-medium2) var(--md-sys-motion-easing-emphasized-decelerate);
}

@keyframes md-menu-open {
	from { opacity: 0; transform: scaleY(0.8); }
	to { opacity: 1; transform: scaleY(1); }
}

.brokerPicker.hidden { display: none; }

.brokerPickerTitle {
	padding: var(--md-sys-spacing-sm) var(--md-sys-spacing-lg) var(--md-sys-spacing-sm);
	font: var(--md-sys-typescale-label-large-weight) var(--md-sys-typescale-label-large-size)/var(--md-sys-typescale-label-large-line-height) var(--md-sys-typescale-font-family);
	color: var(--md-sys-color-on-surface-variant);
	border-bottom: 1px solid var(--md-sys-color-outline-variant);
	margin-bottom: var(--md-sys-spacing-xs);
}

.brokerPickerList {
	max-height: 240px;
	overflow-y: auto;
	padding: 0 var(--md-sys-spacing-xs);
}

.brokerPickBtn {
	display: block;
	width: 100%;
	padding: var(--md-sys-spacing-sm) var(--md-sys-spacing-md);
	text-align: left;
	background: transparent;
	border: none;
	color: var(--md-sys-color-on-surface);
	font-size: var(--md-sys-typescale-body-medium-size);
	cursor: pointer;
	border-radius: var(--md-sys-shape-corner-small);
	transition: background var(--md-sys-motion-duration-short1) var(--md-sys-motion-easing-standard);
	position: relative;
}

.brokerPickBtn::before {
	content: '';
	position: absolute;
	inset: 0;
	border-radius: inherit;
	background: var(--md-sys-color-on-surface);
	opacity: 0;
	transition: opacity var(--md-sys-motion-duration-short1) var(--md-sys-motion-easing-standard);
}

.brokerPickBtn:hover::before {
	opacity: 0.08;
}

.brokerPickerEmpty {
	padding: var(--md-sys-spacing-lg);
	text-align: center;
	font-size: var(--md-sys-typescale-body-medium-size);
	color: var(--md-sys-color-on-surface-variant);
}
