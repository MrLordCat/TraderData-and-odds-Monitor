/* ------------------------------------------------------------------ */
/* Root theme tokens                                                   */
/* ------------------------------------------------------------------ */
:root {
	--bg: #0d0f17;
	--panel: #161b28;
	--panel-alt: #1f2535;
	--accent: #2f7cf6;
	--accent-glow: #3aa9ff;
	--good: #15c25a;
	--good-glow: #34ff8d;
	--text: #e4e7ef;
	--muted: #6b7486;
	--danger: #ff3d5e;
	--radius: 8px;
	--transition: 120ms;
	--ui-contrast: 1;
}

/* ------------------------------------------------------------------ */
/* Base layout                                                         */
/* ------------------------------------------------------------------ */
body {
	margin: 0;
	font: 13px var(--font-sans);
	background: linear-gradient(135deg, #0b0e15, #141b29);
	color: var(--text);
	-webkit-font-smoothing: antialiased;
	filter: contrast(calc(var(--ui-contrast) * 1)) brightness(calc(0.9 + (var(--ui-contrast) - 1) * 0.25));
	transition: filter .25s ease;
}
body.overlay-blur {
	filter: blur(18px) contrast(calc(var(--ui-contrast) * 1)) brightness(calc(0.9 + (var(--ui-contrast) - 1) * 0.25));
}
html .overlay-blur #stageOutline { filter: none; }

/* Top toolbar removed (controls live in docked board panel). */

/* ------------------------------------------------------------------ */
/* Form controls / buttons                                             */
/* ------------------------------------------------------------------ */
button,
select {
	background: var(--panel-alt);
	color: var(--text);
	border: 1px solid #2c3649;
	border-radius: 6px;
	padding: 6px 12px;
	font: 12px var(--font-sans);
	font-weight: 500;
	cursor: pointer;
	letter-spacing: .65px;
	transition: background var(--transition), border-color var(--transition), transform var(--transition), box-shadow var(--transition);
}
button:hover,
select:hover {
	background: #233041;
	border-color: #3a4960;
	box-shadow: 0 0 0 1px #2c3649, 0 0 10px -2px rgba(63, 134, 255, .35);
}
button:active {
	transform: translateY(1px);
	box-shadow: 0 0 0 1px #36517a, 0 0 6px -1px rgba(63, 134, 255, .55);
}
button:focus-visible {
	outline: 2px solid #4870a8;
	outline-offset: 2px;
}
select { padding: 5px 10px; }

/* ------------------------------------------------------------------ */
/* Stage outline                                                       */
/* ------------------------------------------------------------------ */
#stageOutline {
	position: absolute;
	left: 0;
	right: 0;
	border: 1px dashed rgba(255,255,255,0.12);
	pointer-events: none;
	top: 0;
	height: 0;
	transition: opacity 180ms;
}
body:hover #stageOutline { opacity: .85; }

/* ------------------------------------------------------------------ */
/* Modal styles                                                        */
/* ------------------------------------------------------------------ */
.modalOverlay {
	position: fixed;
	inset: 0;
	display: flex;
	align-items: flex-start;
	justify-content: center;
	padding: 60px 30px 40px;
	background: rgba(10,14,22,.35);
	backdrop-filter: blur(16px) saturate(1.3);
	z-index: 400;
	opacity: 0;
	pointer-events: none;
	transition: opacity .18s ease;
}
.modalOverlay.show { opacity: 1; pointer-events: auto; }
.modalOverlay.hidden { display: none; }

.modalPanel {
	width: 360px;
	max-width: 100%;
	background: linear-gradient(160deg, #1b2434, #141b29 70%);
	border: 1px solid #5876ac;
	border-radius: 14px;
	box-shadow: 0 8px 28px -4px rgba(0,0,0,.65), 0 0 0 1px rgba(255,255,255,0.04);
	display: flex;
	flex-direction: column;
	animation: panelPop .35s cubic-bezier(.4,.12,.2,1);
}
@keyframes panelPop {
	0% { transform: translateY(14px) scale(.95); opacity: 0; }
	60% { transform: translateY(-2px) scale(1); opacity: 1; }
	100% { transform: translateY(0) scale(1); }
}

.modalHeader {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 14px 18px 10px;
}
.modalHeader h2 {
	margin: 0;
	font-size: 16px;
	font-weight: 600;
	letter-spacing: .5px;
}

.closeBtn {
	background: #202a3b;
	border: 1px solid #2f3d53;
	border-radius: 6px;
	color: var(--text);
	cursor: pointer;
	padding: 4px 10px;
	font-size: 13px;
}
.closeBtn:hover { background: #273446; }

.modalBody {
	padding: 4px 18px 14px;
	display: flex;
	flex-direction: column;
	gap: 14px;
}

.modalFooter {
	padding: 10px 18px 16px;
	display: flex;
	gap: 10px;
	justify-content: flex-end;
	border-top: 1px solid #273040;
}
.modalFooter .primary {
	background: #2f7cf6;
	border-color: #2f7cf6;
	color: #fff;
	box-shadow: 0 0 0 1px #2f7cf6, 0 0 8px -1px rgba(47,124,246,.65);
}
.modalFooter .primary:hover { background: #3b85fb; }
.modalFooter .primary:active { background: #2a6fd0; }

body.overlay-blur .modalOverlay { filter: none !important; }

/* ------------------------------------------------------------------ */
/* Form field rows                                                     */
/* ------------------------------------------------------------------ */
.fieldRow {
	display: flex;
	flex-direction: column;
	gap: 4px;
	font-size: 13px;
	font-weight: 500;
}
.fieldRow input[type=range] { width: 100%; }
.noteSmall {
	font-size: 11px;
	opacity: .65;
	line-height: 1.35;
}
