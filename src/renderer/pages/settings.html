<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
	<meta charset="utf-8" />
	<title>Settings</title>
	<link rel="stylesheet" href="../styles/m3-tokens.css" />
	<link rel="stylesheet" href="../styles/m3-components.css" />
	<link rel="stylesheet" href="../styles/common.css" />
	<link rel="stylesheet" href="../styles/settings.css" />
</head>
<body>
	<div id="backdrop"></div>
	<div class="panel" role="dialog" aria-modal="true" aria-labelledby="title">
		<div class="head">
			<h1 id="title">Settings <small id="version-label" style="opacity:0.5;font-weight:normal"></small></h1>
			<button id="close" class="x">‚úï</button>
		</div>
		<div class="content">
			<div class="segmentsScroll">
				<div class="segments" role="group" aria-label="Settings sections">
					<section class="seg">
					<h2 class="sectionTitle">Game</h2>
					<div class="grid formGrid">
						<label for="game-select">Select game</label>
						<select id="game-select">
							<option value="lol">League of Legends</option>
							<option value="cs2">CS2</option>
							<option value="dota2">Dota 2</option>
						</select>
					</div>
					<div class="hint">This setting is applied globally. Listeners receive an event and can adjust parsers and UI.</div>
					</section>

					<section class="seg">
					<h2 class="sectionTitle">Broker Refresh</h2>
					<div class="grid formGrid">
						<label for="br-reselect-enabled">Map reselect (periodic)
							<small class="labelHint">Periodically re-click map tabs to ensure correct odds</small>
						</label>
						<input id="br-reselect-enabled" type="checkbox" checked />
						<label for="br-reselect-interval">Reselect interval</label>
						<div class="rangeWrap">
							<input id="br-reselect-interval" type="range" min="5" max="60" step="5" value="10" />
							<span id="br-reselect-interval-val" class="rangeVal">10s</span>
						</div>
						<div class="subRule" aria-hidden="true"></div>
						<label for="br-reload-enabled">Auto reload stale brokers
							<small class="labelHint">Reload broker page if odds missing or unchanged</small>
						</label>
						<input id="br-reload-enabled" type="checkbox" checked />
						<label for="br-missing-timeout">Missing odds timeout
							<small class="labelHint">Reload if odds are '-' for this long</small>
						</label>
						<div class="rangeWrap">
							<input id="br-missing-timeout" type="range" min="1" max="10" step="1" value="1" />
							<span id="br-missing-timeout-val" class="rangeVal">1 min</span>
						</div>
						<label for="br-unchanged-timeout">Unchanged odds timeout
							<small class="labelHint">Reload if odds haven't changed for this long</small>
						</label>
						<div class="rangeWrap">
							<input id="br-unchanged-timeout" type="range" min="1" max="10" step="1" value="3" />
							<span id="br-unchanged-timeout-val" class="rangeVal">3 min</span>
						</div>
					</div>
					<div class="hint">Map reselect periodically re-clicks map tabs (useful for SPAs). Auto reload refreshes broker pages when odds go stale or missing. These features work when the ‚ü≥ button is active.</div>
					</section>

					<section class="seg">
					<h2 class="sectionTitle">Hotkeys</h2>
					<ul class="hotkeyList">
						<li><span class="hk">Tab</span> ‚Äî switch between Brokers and Stats</li>
						<li><span class="hk">F1</span> ‚Äî toggle Auto (works while the app window is active)</li>
						<li><span class="hk">F2</span> ‚Äî Auto Resume after Suspend (toggle)</li>
						<li><span class="hk">F3</span> ‚Äî start/stop Excel/Python script</li>
						<li><span class="hk">Num5</span> ‚Äî global (even outside the app) toggle Auto</li>
					</ul>
					<div class="hint">Tab/F1/F2/F3 are handled only when the app is active. Num5 is a global hotkey (if registered with the OS).</div>
					</section>

					<section class="seg">
					<h2 class="sectionTitle">Auto Odds</h2>
					<div class="grid formGrid">
						<!-- DS Auto Mode Section -->
						<div class="subRule" aria-hidden="true"></div>
						<label for="ds-auto-mode">DS Auto Mode
							<small class="labelHint">Use DS extension instead of Excel (no Python needed)</small>
						</label>
						<div class="dsAutoWrap">
							<input id="ds-auto-mode" type="checkbox" />
							<span id="ds-connection-status" class="ds-status disconnected">‚ö´ DS</span>
						</div>
						<div class="subRule" aria-hidden="true"></div>
						<!-- End DS Auto Mode -->
						<label for="auto-tolerance">Tolerance (%)</label>
						<div class="rangeWrap">
							<input id="auto-tolerance" type="range" min="0.5" max="10" step="0.1" />
							<span id="auto-tolerance-val" class="rangeVal"></span>
						</div>
						<label for="auto-interval">Step interval (ms)
							<small class="labelHint">How often Auto checks alignment</small>
						</label>
						<div class="rangeWrap">
							<input id="auto-interval" type="range" min="120" max="2000" step="10" />
							<span id="auto-interval-val" class="rangeVal"></span>
						</div>
						<label for="auto-adaptive">Adaptive mode
							<small class="labelHint">Wait for Excel to change before next step</small>
						</label>
						<input id="auto-adaptive" type="checkbox" />
						<div class="subRule" aria-hidden="true"></div>
						<label for="auto-suspend-threshold">Auto Suspend threshold (%)
							<small class="labelHint">Pauses auto when diff ‚â• this; resumes at half</small>
						</label>
						<div class="rangeWrap">
							<input id="auto-suspend-threshold" type="range" min="15" max="80" step="1" />
							<span id="auto-suspend-threshold-val" class="rangeVal"></span>
						</div>
						<label for="auto-shock-threshold">Shock threshold (%)
							<small class="labelHint">Large odds shift detection (ARB protection)</small>
						</label>
						<div class="rangeWrap">
							<input id="auto-shock-threshold" type="range" min="40" max="120" step="1" />
							<span id="auto-shock-threshold-val" class="rangeVal"></span>
						</div>
						<label for="auto-stop-no-mid">Stop on no MID
							<small class="labelHint">Disable Auto when MID data unavailable</small>
						</label>
						<input id="auto-stop-no-mid" type="checkbox" checked />
						<div class="subRule" aria-hidden="true"></div>
						<label for="auto-fire-cooldown">Fire cooldown (ms)
							<small class="labelHint">Min delay between keypresses</small>
						</label>
						<div class="rangeWrap">
							<input id="auto-fire-cooldown" type="range" min="100" max="3000" step="50" />
							<span id="auto-fire-cooldown-val" class="rangeVal"></span>
						</div>
						<label for="auto-max-excel-wait">Max Excel wait (ms)
							<small class="labelHint">Timeout for Excel change in adaptive mode</small>
						</label>
						<div class="rangeWrap">
							<input id="auto-max-excel-wait" type="range" min="500" max="5000" step="100" />
							<span id="auto-max-excel-wait-val" class="rangeVal"></span>
						</div>
						<label for="auto-pulse-gap">Pulse gap (ms)
							<small class="labelHint">Delay between burst pulses</small>
						</label>
						<div class="rangeWrap">
							<input id="auto-pulse-gap" type="range" min="20" max="200" step="5" />
							<span id="auto-pulse-gap-val" class="rangeVal"></span>
						</div>
						<div class="subRule" aria-hidden="true"></div>
						<label for="burst1-th">Burst L1 threshold (%)</label>
						<div class="rangeWrap">
								<input id="burst1-th" type="range" min="7" max="15" step="1" />
							<span id="burst1-th-val" class="rangeVal"></span>
						</div>
						<label for="burst1-pulses">Burst L1 pulses</label>
						<div class="rangeWrap">
							<input id="burst1-pulses" type="range" min="1" max="5" step="1" />
							<span id="burst1-pulses-val" class="rangeVal"></span>
						</div>
						<div class="subRule" aria-hidden="true"></div>
						<label for="burst2-th">Burst L2 threshold (%)</label>
						<div class="rangeWrap">
								<input id="burst2-th" type="range" min="10" max="20" step="1" />
							<span id="burst2-th-val" class="rangeVal"></span>
						</div>
						<label for="burst2-pulses">Burst L2 pulses</label>
						<div class="rangeWrap">
							<input id="burst2-pulses" type="range" min="1" max="5" step="1" />
							<span id="burst2-pulses-val" class="rangeVal"></span>
						</div>
						<div class="subRule" aria-hidden="true"></div>
						<label for="burst3-enabled">Burst L3 enabled</label>
						<input id="burst3-enabled" type="checkbox" checked />
						<label for="burst3-th">Burst L3 threshold (%)</label>
						<div class="rangeWrap">
								<input id="burst3-th" type="range" min="20" max="40" step="1" />
							<span id="burst3-th-val" class="rangeVal"></span>
						</div>
						<label for="burst3-pulses">Burst L3 pulses</label>
						<div class="rangeWrap">
							<input id="burst3-pulses" type="range" min="1" max="5" step="1" />
							<span id="burst3-pulses-val" class="rangeVal"></span>
						</div>
					</div>
					<div class="hint">Tolerance: diff% below this considered aligned. Step interval: polling rate. Adaptive: waits for Excel before next step. Suspend: pauses on large diff. Shock: ARB detection. Burst levels: pulses before confirm (F22).</div>
					</section>

				<!-- Game Stats Theme section removed (LoL table theme controls deprecated) -->
					<section class="seg">
					<h2 class="sectionTitle">Stats Table</h2>
					<div class="grid formGrid">
						<label for="st-winlose">Win/Lose highlight</label><input id="st-winlose" type="checkbox" />
					</div>
					<div class="hint">Win/Lose highlight updates instantly.</div>
					</section>

					<section class="seg">
					<h2 class="sectionTitle">Table Animations</h2>
					<div class="grid formGrid">
						<label for="anim-enabled">Animations enabled</label><input id="anim-enabled" type="checkbox" />
						<label for="anim-duration">Duration (ms)</label><input id="anim-duration" type="number" min="50" max="5000" step="10" />
						<label for="anim-scale">Scale</label><input id="anim-scale" type="range" min="0.25" max="2" step="0.05" />
						<label for="anim-color1">Primary color</label><input id="anim-color1" type="color" />
						<label for="anim-color2">Secondary color</label><input id="anim-color2" type="color" />
					</div>
						<div class="hint">Animations are currently minimal (the framework is in place). Settings are saved for future effects.</div>
					</section>

					<section class="seg">
					<h2 class="sectionTitle">Activity Heat Bar</h2>
					<div class="grid formGrid">
						<label for="hb-enabled">Enabled</label><input id="hb-enabled" type="checkbox" />
						<label for="hb-decay">Decay (/sec)</label><input id="hb-decay" type="number" min="0.01" max="2" step="0.01" />
						<label for="hb-bump">Bump (+)</label><input id="hb-bump" type="number" min="0.01" max="1" step="0.01" />
						<label for="hb-color1">Team 1 color</label><input id="hb-color1" type="color" />
						<label for="hb-color2">Team 2 color</label><input id="hb-color2" type="color" />
						<label for="hb-opacity">Opacity</label><input id="hb-opacity" type="range" min="0" max="1" step="0.01" />
					</div>
					<div class="hint">Activity bar: increases on events, decays over time. Colors blend; opacity scales max intensity.</div>
					</section>

					<section class="seg">
					<h2 class="sectionTitle">Addons</h2>
					<div class="addons-container">
						<div class="addons-actions">
							<button id="addons-refresh" type="button" class="btn-secondary">
								<span class="btn-icon">üîÑ</span> Refresh
							</button>
							<button id="addons-open-folder" type="button" class="btn-secondary">
								<span class="btn-icon">üìÅ</span> Open Folder
							</button>
							<div class="addon-channel-selector">
								<label for="addon-channel">Channel:</label>
								<select id="addon-channel">
									<option value="dev">Dev (latest)</option>
									<option value="release">Release (stable)</option>
								</select>
							</div>
						</div>
						
						<div id="addons-list" class="addons-list">
							<div class="addons-loading">Loading addons...</div>
						</div>
						
						<div id="addons-available" class="addons-available">
							<h3 class="addons-subtitle">Available to Install</h3>
							<div id="addons-available-list"></div>
						</div>
					</div>
					<div class="hint">Addons extend app functionality. After installing or enabling/disabling, restart the app to apply changes.</div>
					</section>

					<section class="seg">
					<h2 class="sectionTitle">Dev</h2>
					<div class="grid formGrid">
						<label>DevTools</label>
						<button id="open-devtools" type="button">Open DevTools</button>
						<label>Main Window</label>
						<button id="open-main-devtools" type="button">Main Window DevTools</button>
						<label>User Data</label>
						<button id="open-userdata" type="button">Open Folder</button>
					</div>
					<div class="hint">DevTools opens board console. Main Window opens renderer console. User Data folder contains logs and settings.</div>
					</section>

					<section class="seg">
					<h2 class="sectionTitle">Updates</h2>
					<div class="grid formGrid">
						<label for="upd-channel">Update channel</label>
						<select id="upd-channel">
							<option value="stable">Stable (releases)</option>
							<option value="dev">Dev (commits)</option>
						</select>
						<label for="upd-auto">Check on startup</label>
						<input id="upd-auto" type="checkbox" />
						<label>Current version</label>
						<span id="upd-version" class="staticVal">‚Äî</span>
						<label>Status</label>
						<span id="upd-status" class="staticVal">‚Äî</span>
					</div>
					<div class="updateActions">
						<button id="upd-check" type="button">Check for Updates</button>
						<button id="upd-download" type="button" disabled>Download &amp; Install</button>
					</div>
					<div id="upd-progress" class="progress" hidden>
						<div class="bar"></div>
					</div>
					<div class="hint">Stable channel updates when new release tags (v*) are published. Dev channel updates on every commit to main branch.</div>
					</section>

					<section class="seg">
					<h2 class="sectionTitle">Edge Extension</h2>
					<div class="grid formGrid">
						<label>Status</label>
						<span id="ext-status" class="staticVal">‚Äî</span>
						<label>Extension version</label>
						<span id="ext-version" class="staticVal">‚Äî</span>
					</div>
					<div class="updateActions">
						<button id="ext-open-folder" type="button">Open Extension Folder</button>
					</div>
					<div class="hint">To install: Open Edge ‚Üí edge://extensions/ ‚Üí Enable Developer mode ‚Üí Load unpacked ‚Üí Select the folder above.</div>
					</section>
				</div>
			</div>
		</div>
		<div class="foot">
			<button id="reset">Reset</button>
			<button id="save" class="primary">Save</button>
		</div>
	</div>
	<script src="../scripts/settings/index.js"></script>
</body>
</html>
