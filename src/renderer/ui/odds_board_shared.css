/* Shared Odds Board styles used by: main board + stats embedded board */
/* M3 Design System Integration - Enhanced depth & readability */

/* ===== Embedded Odds Board (Stats) wrapper ===== */
#embeddedOddsSection { 
	border: 1px solid var(--md-sys-color-outline-variant, #3a3d46);
	background: linear-gradient(
		180deg,
		var(--md-sys-color-surface-container, #22262e) 0%,
		var(--md-sys-color-surface-container-low, #1c1f26) 100%
	);
	border-radius: var(--md-sys-shape-corner-medium, 12px);
	overflow: hidden;
	margin: var(--md-sys-spacing-xs, 4px) var(--md-sys-spacing-sm, 8px);
	box-shadow: var(--md-sys-elevation-1, 0 2px 8px rgba(0,0,0,0.3));
}
#embeddedOddsSection.collapsed #embeddedOddsBody { max-height:0; padding:0; }
#embeddedOddsBody { 
	max-height:340px;
	overflow-y:auto;
	overflow-x:hidden;
	transition: max-height var(--md-sys-motion-duration-medium1, 250ms) var(--md-sys-motion-easing-standard, cubic-bezier(0.2, 0, 0, 1));
	padding: 0;
}

/* ===== Odds Table (M3 Data Table) - Enhanced readability ===== */
.embeddedOddsTable,
#table {
	width:100%;
	border-collapse: separate;
	border-spacing: 0;
	font-size: var(--md-sys-typescale-body-small-size, 12px);
	table-layout: fixed;
}

.embeddedOddsTable th, .embeddedOddsTable td,
#table th, #table td {
	padding: var(--md-sys-spacing-xs, 4px) var(--md-sys-spacing-sm, 8px);
	border-bottom: 1px solid var(--md-sys-color-outline-variant, #3a3d46);
	vertical-align:middle;
}

/* Broker column - always left aligned, 30% width */
.embeddedOddsTable td.eo-broker,
.embeddedOddsTable th.eo-broker,
#table td:first-child,
#table th:first-child {
	text-align: left;
	width: 30%;
	max-width: 30%;
}

/* Odds columns - center aligned, take remaining space */
.embeddedOddsTable td:not(.eo-broker):not(.eo-swap-cell),
#table td:not(:first-child) {
	text-align: center;
}

/* Swap cell - minimal width, center */
.embeddedOddsTable td.eo-swap-cell {
	text-align: center;
	width: 32px;
	padding: 0 2px;
}

.embeddedOddsTable thead th,
#table thead th {
	background: linear-gradient(
		180deg,
		var(--md-sys-color-surface-container-high, #2a2f38) 0%,
		var(--md-sys-color-surface-container, #22262e) 100%
	);
	color: var(--md-sys-color-on-surface-variant, #a8abb5);
	font-weight: var(--md-sys-typescale-title-small-weight, 500);
	font-size: var(--md-sys-typescale-label-medium-size, 12px);
	text-transform: none;
	letter-spacing: 0.02em;
}

.embeddedOddsTable tbody tr,
#table tbody tr {
	transition: background var(--md-sys-motion-duration-short1, 100ms) var(--md-sys-motion-easing-standard);
}

.embeddedOddsTable tbody tr:hover,
#table tbody tr:hover {
	background: rgba(255, 255, 255, 0.03);
}

.embeddedOddsTable tbody tr:last-child td,
#table tbody tr:last-child td {
	border-bottom:none;
}

/* Default: keep broker name aligned left in first column */
#table tfoot th:first-child {
	text-align:left;
}

/* Frozen / best highlighting */
.embeddedOddsTable td.frozen,
#table td.frozen {
	opacity:.55;
}

.embeddedOddsTable tr.frozen td,
#table tr.frozen td {
	opacity:.5;
	filter: grayscale(.35);
	position:relative;
}

.embeddedOddsTable tr.frozen td:first-child .eo-broker-label::after,
#table tr.frozen td:first-child .eo-broker-label::after{
	content:' (susp)';
	font-weight:400;
	opacity:.8;
	font-size: var(--md-sys-typescale-label-small-size, 11px);
	margin-left:4px;
	color: var(--md-sys-color-warning, #e5c349);
}

.embeddedOddsTable tr.frozen td.best,
#table tr.frozen td.best {
	box-shadow:none;
}

.embeddedOddsTable td.best,
#table td.best {
	color: var(--md-sys-color-tertiary, #d4b14a);
	font-weight: var(--md-sys-typescale-label-large-weight, 500);
	text-shadow:none;
}

/* ===== Movement color indicators (2s duration, smooth fade) ===== */
/* Use CSS animation instead of transition (innerHTML rebuild breaks transitions) */

@keyframes odds-flash-up {
	0% { background: rgba(74, 222, 128, 0); color: inherit; }
	15% { background: rgba(74, 222, 128, 0.2); color: #4ade80; }
	85% { background: rgba(74, 222, 128, 0.15); color: #4ade80; }
	100% { background: rgba(74, 222, 128, 0); color: inherit; }
}

@keyframes odds-flash-down {
	0% { background: rgba(248, 113, 113, 0); color: inherit; }
	15% { background: rgba(248, 113, 113, 0.2); color: #f87171; }
	85% { background: rgba(248, 113, 113, 0.15); color: #f87171; }
	100% { background: rgba(248, 113, 113, 0); color: inherit; }
}

.embeddedOddsTable td.odds-up,
.embeddedOddsTable .odds-cell-1.odds-up,
.embeddedOddsTable .odds-cell-2.odds-up,
#table td.odds-up {
	animation: odds-flash-up 2s ease-out forwards;
}

.embeddedOddsTable td.odds-down,
.embeddedOddsTable .odds-cell-1.odds-down,
.embeddedOddsTable .odds-cell-2.odds-down,
#table td.odds-down {
	animation: odds-flash-down 2s ease-out forwards;
}

/* ===== DS / Excel row no-data state ===== */
#embeddedDsRow.no-data td,
#dsRow.no-data td {
	opacity: 0.4;
	font-style: italic;
}

#embeddedDsRow.no-data th,
#dsRow.no-data th {
	opacity: 0.5;
}

/* ===== Swap button (M3 chip style) ===== */
.eo-swapBtn,
.swapBtn {
	background: var(--md-sys-color-secondary-container, #3f4759);
	border: none;
	color: var(--md-sys-color-on-secondary-container, #dde1f0);
	font-size: var(--md-sys-typescale-label-medium-size, 12px);
	padding: var(--md-sys-spacing-xs, 4px) var(--md-sys-spacing-sm, 8px);
	border-radius: var(--md-sys-shape-corner-full, 9999px);
	cursor:pointer;
	line-height:1;
	position: relative;
	transition: all var(--md-sys-motion-duration-short2, 200ms) var(--md-sys-motion-easing-standard);
}
.eo-swapBtn.on,
.swapBtn.on {
	background: var(--md-sys-color-primary, #a0c4ff);
	color: var(--md-sys-color-on-primary, #003060);
}
.eo-swapBtn:hover,
.swapBtn:hover { 
	filter: brightness(1.12);
}

.eo-swap-header { opacity:.55; }

/* ===== Embedded Mid row (Stats) + main Mid row ===== */
#embeddedMidRow th,
#midRow th {
	text-align:left;
	font-weight: var(--md-sys-typescale-label-large-weight, 500);
	color: var(--md-sys-color-on-surface-variant, #c4c6cf);
}
#embeddedMidCell {
	text-align:center;
	font-size: var(--md-sys-typescale-body-small-size, 12px);
}

/* ===== Excel / Auto controls (M3 chips) ===== */
.excelControls { 
	display:inline-flex; 
	align-items:center; 
	gap: var(--md-sys-spacing-xs, 4px); 
	flex-wrap:nowrap; 
	white-space:nowrap; 
}
.excelControls > * {
	height: 22px;
	box-sizing: border-box;
}
.excelControls .autoBtn { margin-left: var(--md-sys-spacing-sm, 8px); }
.excelControls button { flex:0 0 auto; }

/* Auto/Script buttons - M3 tonal chip style */
.autoBtn, .autoSubBtn { 
	background: var(--md-sys-color-secondary-container, #3f4759);
	border: none;
	color: var(--md-sys-color-on-secondary-container, #dde1f0);
	padding: 0 var(--md-sys-spacing-sm, 8px);
	height: 22px;
	min-width: 22px;
	font-size: var(--md-sys-typescale-label-small-size, 11px);
	line-height: 22px;
	border-radius: var(--md-sys-shape-corner-full, 9999px);
	cursor:pointer;
	position: relative;
	box-sizing: border-box;
	transition: all var(--md-sys-motion-duration-short2, 200ms) var(--md-sys-motion-easing-standard);
}
.autoSubBtn { padding: 0 var(--md-sys-spacing-sm, 6px); }
.autoBtn.on, .autoSubBtn.on { 
	background: var(--md-sys-color-primary, #a0c4ff);
	color: var(--md-sys-color-on-primary, #003060);
}
.autoBtn.waiting { 
	background: var(--md-sys-color-warning-container, #ffd54f);
	color: var(--md-sys-color-on-warning-container, #3e2723);
	animation: waitingPulse 1.5s ease-in-out infinite;
}
@keyframes waitingPulse {
	0%, 100% { opacity: 1; }
	50% { opacity: 0.7; }
}

/* Mode buttons (Excel / DS mode selection) */
.modeBtn {
	background: var(--md-sys-color-secondary-container, #3f4759);
	border: none;
	color: var(--md-sys-color-on-secondary-container, #dde1f0);
	padding: 0 var(--md-sys-spacing-sm, 6px);
	height: 22px;
	min-width: 28px;
	font-size: var(--md-sys-typescale-label-small-size, 11px);
	font-weight: var(--md-sys-typescale-label-large-weight, 500);
	line-height: 22px;
	border-radius: var(--md-sys-shape-corner-full, 9999px);
	cursor: pointer;
	box-sizing: border-box;
	transition: all var(--md-sys-motion-duration-short2, 200ms) var(--md-sys-motion-easing-standard);
}
.modeBtn.on {
	background: var(--md-sys-color-primary, #a0c4ff);
	color: var(--md-sys-color-on-primary, #003060);
}
.modeBtn:hover:not(.on) {
	filter: brightness(1.12);
}

/* DS controls row alignment */
.dsControls {
	display: flex;
	align-items: center;
	gap: var(--md-sys-spacing-xs, 4px);
	height: 22px;
}

/* DS game phase badge */
.dsGamePhaseBadge {
  display: none;
  align-items: center;
  justify-content: center;
  min-width: 20px;
  height: 18px;
  padding: 0 5px;
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 0.3px;
  border-radius: var(--md-sys-shape-corner-full, 9999px);
  box-sizing: border-box;
  line-height: 18px;
  transition: background 0.3s ease, color 0.3s ease;
}
.dsGamePhaseBadge.phase-live {
  display: inline-flex;
  background: #16a34a;
  color: #fff;
}
.dsGamePhaseBadge.phase-pre {
  display: inline-flex;
  background: #ca8a04;
  color: #fff;
}
.dsGamePhaseBadge.phase-post {
  display: inline-flex;
  background: #6b7280;
  color: #e5e7eb;
}
.dsGamePhaseBadge.phase-other {
  display: inline-flex;
  background: #7c3aed;
  color: #fff;
}

/* Script map badge (shows Python hotkey controller current map) */
.scriptMapBadge {
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-width:24px;
  height:24px;
  padding:0 var(--md-sys-spacing-xs, 4px);
  margin-left: var(--md-sys-spacing-xs, 4px);
  font-size: var(--md-sys-typescale-label-small-size, 11px);
  font-weight: var(--md-sys-typescale-label-large-weight, 500);
  background: var(--md-sys-color-surface-container, #1d2530);
  border: none;
  border-radius: var(--md-sys-shape-corner-full, 9999px);
  box-sizing: border-box;
  color: var(--md-sys-color-on-surface-variant, #c4c6cf);
}
.scriptMapBadge.mismatch {
  background: var(--md-sys-color-error-container, #93000a);
  color: var(--md-sys-color-on-error-container, #ffdad6);
}
.scriptMapBadge.match {
  background: var(--md-sys-color-success, #4ade80);
  color: var(--md-sys-color-on-success, #003912);
}

/* Auto reason badge (shows why auto stopped) */
.autoReasonBadge {
  display:none;
  align-items:center;
  justify-content:center;
  height:22px;
  padding:0 var(--md-sys-spacing-sm, 6px);
  margin-left: var(--md-sys-spacing-xs, 4px);
  font-size: var(--md-sys-typescale-label-small-size, 10px);
  font-weight: var(--md-sys-typescale-label-large-weight, 500);
  background: var(--md-sys-color-error-container, #93000a);
  border-radius: var(--md-sys-shape-corner-full, 9999px);
  box-sizing: border-box;
  color: var(--md-sys-color-on-error-container, #ffdad6);
  white-space: nowrap;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}
.autoReasonBadge.visible {
  display:inline-flex;
}

.excelAutoCell { background:transparent; font-size: var(--md-sys-typescale-body-small-size, 12px); }
.autoIndicators { display:flex; align-items:center; gap: var(--md-sys-spacing-lg, 16px); justify-content:center; width:100%; }

/* Auto indicator dots with M3 styling */
.autoDot { 
	width:12px;
	height:12px;
	border-radius: var(--md-sys-shape-corner-full, 50%);
	background: var(--md-sys-color-surface-container-highest, #353d48);
	box-shadow: inset 0 0 0 1px var(--md-sys-color-outline-variant, #3c4553);
	opacity:.38;
	transition: all var(--md-sys-motion-duration-medium1, 250ms) var(--md-sys-motion-easing-standard);
	flex:0 0 auto;
}
.autoDot.active { 
	opacity:1;
	background: var(--md-sys-color-primary, #a0c4ff);
	box-shadow: 0 0 8px var(--md-sys-color-primary, #a0c4ff), 0 0 16px rgba(160,196,255,.4);
}
.autoStatus { 
	font-size: var(--md-sys-typescale-body-small-size, 12px);
	color: var(--md-sys-color-on-surface-variant, #c4c6cf);
	letter-spacing: var(--md-sys-typescale-body-small-tracking, 0.4px);
	min-width:120px;
	text-align:center;
	white-space:nowrap;
	flex:0 1 auto;
}
.excelAutoCell { padding: var(--md-sys-spacing-xs, 4px) var(--md-sys-spacing-sm, 8px); }
.excelAutoIndicatorsCell { border-bottom: 1px solid var(--md-sys-color-outline-variant, #3c4553); }
.excelAutoStatusCell { padding-top: var(--md-sys-spacing-xs, 2px); }
